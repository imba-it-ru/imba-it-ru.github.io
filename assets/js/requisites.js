(()=>{"use strict";const t={scroll(){document.body.style.overflow=""},unscroll(){document.body.style.overflow="hidden"}};class e{constructor(t){this._popup=t,this.openPopup=this.openPopup.bind(this),this.closePopup=this.closePopup.bind(this),this._setEscHandler=this._setEscHandler.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}openPopup(){this._popup.classList.add("popup-form_visible"),document.body.style.overflow="hidden",t.unscroll(),document.addEventListener("keydown",this._setEscHandler)}closePopup(){this._popup.classList.remove("popup-form_visible"),t.scroll(),document.removeEventListener("keydown",this._setEscHandler)}_setEscHandler(t){"Escape"===t.key&&this.closePopup()}setEventListeners(){this._popup.addEventListener("mousedown",(t=>{(t.target.classList.contains("popup-form_visible")||t.target.closest(".popup-form__close"))&&this.closePopup()}))}}class o extends e{constructor(t,e){super(t),this._form=t.querySelector(".form"),this._onSubmit=e,this._inputList=this._form.querySelectorAll(".form__item"),this._popupButton=this._form.querySelector(".form__btn"),this._inputValues={}}closePopup(){this._form.reset(),super.closePopup()}_getInputValues(){return this._inputList.forEach((t=>{this._inputValues[t.name]=t.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault()}))}}const s={WRAPPER:document.querySelector(".wrapper"),CANVAS:document.querySelector(".canvas")},c=-180,n=180,i=-90,l=90,r="#FBFBFB",a="#A42E2C",u="#670E0E",d={rotation:0,time:0,ctx:void 0,dots:[],background:r,KKK:0,WIDTH:0,HEIGHT:0,colorFill:a,colorStroke:u};try{E(),requestAnimationFrame(E),function(){for(let t=0;t<500;t++)d.dots.push(y())}(),function(){const t=s.CANVAS.getContext("2d");t.fillRect(0,0,s.CANVAS.width,s.CANVAS.height),d.ctx=t}(),f(),f()}catch(t){}function h(t){t?(d.background=r,d.colorFill="#511112",d.colorStroke="#340D0F"):(d.background="#202020",d.colorFill=a,d.colorStroke=u)}function p(t){const e=20/t.z,o=d.WIDTH/2,s=d.HEIGHT/2,c=d.KKK*e*t.x+o,n=-d.KKK*e*t.y+s;t.xDisplay=c,t.yDisplay=n,d.ctx.beginPath(),d.ctx.ellipse(c,n,2,2,0,0,2*Math.PI),d.ctx.fill()}function m(t){t.links.forEach((e=>{d.ctx.beginPath(),d.ctx.moveTo(t.xDisplay,t.yDisplay),d.ctx.lineTo(e.xDisplay,e.yDisplay),d.ctx.stroke()}))}function f(){E(),d.time++,d.dots.forEach((t=>{t.a=t.a+t.da,t.b=t.b+t.db,function(t){t.x=0+1*Math.sin(-d.rotation-d.time/1e3+t.a)*Math.cos(t.b),t.y=0+1*Math.sin(t.b),t.z=20-1*Math.cos(t.b)*Math.cos(-d.rotation-d.time/1e3+t.a)}(t)})),d.dots.sort(((t,e)=>e.z-t.z)),d.dots.forEach((t=>{t.links=[],d.dots.forEach((e=>{var o,s;o=t,s=e,Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)+Math.pow(o.z-s.z,2))<.15&&t.links.push(e)}))})),d.ctx.fillStyle=d.background,d.ctx.fillRect(0,0,d.WIDTH,d.HEIGHT),d.ctx.fillStyle=d.colorFill,d.ctx.strokeStyle=d.colorStroke,d.dots.forEach(m),d.dots.forEach(p),requestAnimationFrame(f)}function y(...t){return t.length>0?{a:t[0],b:t[1],da:0,db:0,xDisplay:0,yDisplay:0,links:[]}:{a:(n-c)*Math.random()+c,b:(l-i)*Math.random()+i,da:.003*Math.random()-.0015,db:.003*Math.random()-.0015,links:[]}}function E(){const t=s.CANVAS.clientWidth,e=s.CANVAS.clientHeight,o=Math.min(t,e);d.KKK=o/3,d.WIDTH=t,d.HEIGHT=e,s.CANVAS.width=t,s.CANVAS.height=e}const v=document.querySelectorAll(".js_toggle_input");function _(){document.body.classList.add("light-mode"),h(!0),console.log("светлая тема")}function b(){document.body.classList.remove("light-mode"),h(!1),console.log("тёмная тема")}"dark"===localStorage.getItem("theme")?(v.forEach((t=>{t.checked=!1})),b()):(v.forEach((t=>{t.checked=!0})),_()),v.forEach((t=>{t.addEventListener("change",(()=>{t.checked?(v.forEach((t=>{t.checked=!0})),localStorage.setItem("theme","light"),_()):(v.forEach((t=>{t.checked=!1})),localStorage.setItem("theme","dark"),b())}))})),function(){try{const e=document.querySelector(".js_header_btn"),o=document.querySelector(".js_menu"),s=document.querySelector(".js_menu_overlay"),c=document.querySelector(".js_menu_exit");o.style.display="",e.addEventListener("click",(()=>{s.classList.add("active"),o.classList.add("active-half"),c.classList.add("active"),t.unscroll()})),c.addEventListener("click",(()=>{n()})),s.addEventListener("click",(()=>{n()}));const n=()=>{s.classList.remove("active"),o.classList.remove("active-half","active-full"),c.classList.remove("active"),t.scroll()}}catch(t){}}(),function(){try{const t=document.querySelector("#popupform"),e=new o(t,(t=>{console.log(t),e.closePopup()}));e.setEventListeners(),document.querySelectorAll(".popup-form-open").forEach((t=>{t.addEventListener("click",(()=>{e.openPopup()}))}))}catch(t){console.log(t)}}()})();