(()=>{"use strict";class t{constructor(t,e){this._selectors=t,this._classes=e}initTabs(){this._getElements(),this._setAttributes(),this._setListeners(),this._showByIndex(0)}_getElements(){this._section=document.querySelector(this._selectors.SECTION),this._tabRow=this._section.querySelector(this._selectors.TAB_ROW),this._headers=this._tabRow.querySelectorAll(this._selectors.TAB_BUTTON),this._contents=this._tabRow.querySelectorAll(this._selectors.TAB_CONTENT),this._activeTab=this._tabRow.querySelector(this._selectors.TAB_BTN_ACTIVE),this._activeTabContent=this._tabRow.querySelector(this._selectors.TAB_CONTENT_ACTIVE)}_setAttributes(){this._headers.forEach(((t,e)=>{t.dataset.index=e,t.setAttribute("role","tab"),this._contents[e].setAttribute("role","tab-content"),this._contents[e].dataset.index=e}))}_setListeners(){this._tabRow.addEventListener("click",(t=>{const e=t.target.closest(this._selectors.TAB_BUTTON);e&&(t.preventDefault(),this._setActiveTab(e))}))}_setActiveTab(t){t!==this._activeTab&&(this._toggleClass(!1),this._activeTab=t,this._activeTabContent=this._contents[t.dataset.index],this._toggleClass(!0))}setActiveTab(t){const e=this._headers[t];this._setActiveTab(e)}_toggleClass(t){this._activeTab&&this._activeTab.classList.toggle(this._classes.TAB_BTN_ACTIVE,t),this._activeTabContent&&this._activeTabContent.classList.toggle(this._classes.TAB_CONTENT_ACTIVE,t)}_showByIndex(t){this._setActiveTab(this._headers[t])}}const e={TAB_ROW:".maps-tabs",TAB_BUTTON:".maps-tabs__item",TAB_CONTENT:".maps-tabs__section",SECTION:".maps-contacts",TAB_BTN_ACTIVE:".maps-tabs__item_active",TAB_CONTENT_ACTIVE:".maps-tabs__section_active"},s={TAB_BTN_ACTIVE:"maps-tabs__item_active",TAB_CONTENT_ACTIVE:"maps-tabs__section_active"},o={scroll(){document.body.style.overflow=""},unscroll(){document.body.style.overflow="hidden"}};class i{constructor(t){this._popup=t,this.openPopup=this.openPopup.bind(this),this.closePopup=this.closePopup.bind(this),this._setEscHandler=this._setEscHandler.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}openPopup(){this._popup.classList.add("popup-form_visible"),document.body.style.overflow="hidden",o.unscroll(),document.addEventListener("keydown",this._setEscHandler)}closePopup(){this._popup.classList.remove("popup-form_visible"),o.scroll(),document.removeEventListener("keydown",this._setEscHandler)}_setEscHandler(t){"Escape"===t.key&&this.closePopup()}setEventListeners(){this._popup.addEventListener("mousedown",(t=>{(t.target.classList.contains("popup-form_visible")||t.target.closest(".popup-form__close"))&&this.closePopup()}))}}class c extends i{constructor(t,e){super(t),this._form=t.querySelector(".form"),this._onSubmit=e,this._inputList=this._form.querySelectorAll(".form__item"),this._popupButton=this._form.querySelector(".form__btn"),this._inputValues={}}closePopup(){this._form.reset(),super.closePopup()}_getInputValues(){return this._inputList.forEach((t=>{this._inputValues[t.name]=t.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault()}))}}const a={WRAPPER:document.querySelector(".wrapper"),CANVAS:document.querySelector(".canvas")},n=-180,l=180,r=-90,h=90,_="#FBFBFB",d="#A42E2C",u="#670E0E",p={rotation:0,time:0,ctx:void 0,dots:[],background:_,KKK:0,WIDTH:0,HEIGHT:0,colorFill:d,colorStroke:u};try{A(),requestAnimationFrame(A),function(){for(let t=0;t<500;t++)p.dots.push(E())}(),function(){const t=a.CANVAS.getContext("2d");t.fillRect(0,0,a.CANVAS.width,a.CANVAS.height),p.ctx=t}(),v(),v()}catch(t){}function m(t){t?(p.background=_,p.colorFill="#511112",p.colorStroke="#340D0F"):(p.background="#202020",p.colorFill=d,p.colorStroke=u)}function T(t){const e=20/t.z,s=p.WIDTH/2,o=p.HEIGHT/2,i=p.KKK*e*t.x+s,c=-p.KKK*e*t.y+o;t.xDisplay=i,t.yDisplay=c,p.ctx.beginPath(),p.ctx.ellipse(i,c,2,2,0,0,2*Math.PI),p.ctx.fill()}function b(t){t.links.forEach((e=>{p.ctx.beginPath(),p.ctx.moveTo(t.xDisplay,t.yDisplay),p.ctx.lineTo(e.xDisplay,e.yDisplay),p.ctx.stroke()}))}function v(){A(),p.time++,p.dots.forEach((t=>{t.a=t.a+t.da,t.b=t.b+t.db,function(t){t.x=0+1*Math.sin(-p.rotation-p.time/1e3+t.a)*Math.cos(t.b),t.y=0+1*Math.sin(t.b),t.z=20-1*Math.cos(t.b)*Math.cos(-p.rotation-p.time/1e3+t.a)}(t)})),p.dots.sort(((t,e)=>e.z-t.z)),p.dots.forEach((t=>{t.links=[],p.dots.forEach((e=>{var s,o;s=t,o=e,Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2)+Math.pow(s.z-o.z,2))<.15&&t.links.push(e)}))})),p.ctx.fillStyle=p.background,p.ctx.fillRect(0,0,p.WIDTH,p.HEIGHT),p.ctx.fillStyle=p.colorFill,p.ctx.strokeStyle=p.colorStroke,p.dots.forEach(b),p.dots.forEach(T),requestAnimationFrame(v)}function E(...t){return t.length>0?{a:t[0],b:t[1],da:0,db:0,xDisplay:0,yDisplay:0,links:[]}:{a:(l-n)*Math.random()+n,b:(h-r)*Math.random()+r,da:.003*Math.random()-.0015,db:.003*Math.random()-.0015,links:[]}}function A(){const t=a.CANVAS.clientWidth,e=a.CANVAS.clientHeight,s=Math.min(t,e);p.KKK=s/3,p.WIDTH=t,p.HEIGHT=e,a.CANVAS.width=t,a.CANVAS.height=e}const f=document.querySelectorAll(".js_toggle_input");function y(){document.body.classList.add("light-mode"),m(!0),console.log("светлая тема")}function g(){document.body.classList.remove("light-mode"),m(!1),console.log("тёмная тема")}!function(){try{const o=new t(e,s);o.initTabs();"1"===new URL(window.location.href).searchParams.get("tab")&&o.setActiveTab(1)}catch(t){}"dark"===localStorage.getItem("theme")?(f.forEach((t=>{t.checked=!1})),g()):(f.forEach((t=>{t.checked=!0})),y()),f.forEach((t=>{t.addEventListener("change",(()=>{t.checked?(f.forEach((t=>{t.checked=!0})),localStorage.setItem("theme","light"),y()):(f.forEach((t=>{t.checked=!1})),localStorage.setItem("theme","dark"),g())}))})),function(){try{const t=document.querySelector(".js_header_btn"),e=document.querySelector(".js_menu"),s=document.querySelector(".js_menu_overlay"),i=document.querySelector(".js_menu_exit");e.style.display="",t.addEventListener("click",(()=>{s.classList.add("active"),e.classList.add("active-half"),i.classList.add("active"),o.unscroll()})),i.addEventListener("click",(()=>{c()})),s.addEventListener("click",(()=>{c()}));const c=()=>{s.classList.remove("active"),e.classList.remove("active-half","active-full"),i.classList.remove("active"),o.scroll()}}catch(t){}}(),function(){try{const t=document.querySelector("#popupform"),e=new c(t,(t=>{console.log(t),e.closePopup()}));e.setEventListeners(),document.querySelectorAll(".popup-form-open").forEach((t=>{t.addEventListener("click",(()=>{e.openPopup()}))}))}catch(t){console.log(t)}}()}()})();